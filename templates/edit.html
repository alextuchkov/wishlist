{% extends 'base.html' %}
<title>{% block title %}{% endblock %}</title>
{% block content %}


<div class="content">
    <form method="post" id="editForm">
        <fieldset>
            <div class="list-name">
                <div class="row">
                    <div class="column column-75">
                        <input type="text" disabled placeholder="{{ list.name }} - {{ list.id }}" name="name">
                    </div>
                    
                    <div class="column column-25">
                        <input type="date" disabled placeholder="{{ list.deadline}}" name="deadline">
                    </div>
                </div>
                <textarea disabled placeholder="{{ list.description }}" name="description"></textarea>
                
                <button type="button" id="editDetailsBtn" onclick="toggleButtons()">Edit List Details</button>
                <button type="submit" id="saveChangesBtn" value="Save Changes">Save Changes</button>
            </div>

       </fieldset>
   </form>

   {% for item in list_single_item %}
        <div class="list-item">
            <input type="text" name="item-name" disabled placeholder="{{item.name}}">
            <textarea name="item-description" placeholder="{{item.description}}"></textarea>
            <input type="text" name="item-link" placeholder="{{item.url}}">
            <input type="text" name="item-price" placeholder="{{item.price}}">
        </div>
   {% endfor %}

   <form action="/add_list_item" method="post">
    <div class="list-item">
        <input type="text" name="item-name" placeholder="List Item Name">
        <textarea name="item-description" placeholder="Item Description"></textarea>
        <input type="text" name="item-link" placeholder="Item Link">
        <input type="text" name="item-price" placeholder="Item Price">
        <input type="hidden" name="ref-id" value="{{ list.id }}">
    </div>

    <input class="button-primary" type="submit" value="Add Item">
</form>


    <script>
        function toggleButtons() {
            const editBtn = document.getElementById('editDetailsBtn');
            const saveBtn = document.getElementById('saveChangesBtn');

            if (editBtn.style.display !== 'none') {
                // If Edit button is visible, hide it and show Save Changes button
                editBtn.style.display = 'none';
                saveBtn.style.display = 'block';

                // Enable form elements and copy placeholder to value
                const formElements = document.getElementById('editForm').elements;
                for (let i = 0; i < formElements.length; i++) {
                    const placeholder = formElements[i].getAttribute('placeholder');
                    formElements[i].value = placeholder || ''; // Use placeholder or empty string
                    formElements[i].disabled = false;
                }
            } else {
                // If Save Changes button is visible, hide it and show Edit button
                editBtn.style.display = 'block';
                saveBtn.style.display = 'none';

                // Disable form elements
                const formElements = document.getElementById('editForm').elements;
                for (let i = 0; i < formElements.length; i++) {
                    formElements[i].disabled = true;
                }
            }
        }
    </script>


</div>

{% endblock %}